// generated by ArduinoML

int ADMIN_CARD = 2;
int ADMIN_PIN = 3;
int USER_CARD = 4;
int USER_PIN = 5;
int BIOMETRIC = 6;
int DOOR_LOCK = 11;
int GREEN_LED = 12;
int RED_LED = 13;

void setup() {
	pinMode(ADMIN_CARD, INPUT);
	pinMode(ADMIN_PIN, INPUT);
	pinMode(USER_CARD, INPUT);
	pinMode(USER_PIN, INPUT);
	pinMode(BIOMETRIC, INPUT);
	pinMode(DOOR_LOCK, OUTPUT);
	pinMode(GREEN_LED, OUTPUT);
	pinMode(RED_LED, OUTPUT);
}

int state = LOW; int prev = HIGH;
long time = 0; long debounce = 200;

void state_locked() {
	boolean guard = millis() - time > debounce;
	if (((digitalRead(ADMIN_CARD) == HIGH && digitalRead(ADMIN_PIN) == HIGH) || (digitalRead(USER_CARD) == HIGH && digitalRead(USER_PIN) == HIGH && digitalRead(BIOMETRIC) == HIGH)) && guard) {
		time = millis(); state_unlocked();
	} else {
		state_locked();
	}
}

void state_unlocked() {
	boolean guard = millis() - time > debounce;
	if ((digitalRead(ADMIN_CARD) == LOW && digitalRead(USER_CARD) == LOW) && guard) {
		time = millis(); state_locked();
	} else {
		state_unlocked();
	}
}

void loop() { state_locked(); }