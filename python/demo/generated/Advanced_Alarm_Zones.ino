// generated by ArduinoML

int ARMED = 2;
int ZONE1_MOTION = 3;
int ZONE1_DOOR = 4;
int ZONE2_MOTION = 5;
int ZONE2_GLASS = 6;
int ZONE3_SAFE = 7;
int SIREN = 11;
int STROBE = 12;
int NOTIFICATION = 13;

void setup() {
	pinMode(ARMED, INPUT);
	pinMode(ZONE1_MOTION, INPUT);
	pinMode(ZONE1_DOOR, INPUT);
	pinMode(ZONE2_MOTION, INPUT);
	pinMode(ZONE2_GLASS, INPUT);
	pinMode(ZONE3_SAFE, INPUT);
	pinMode(SIREN, OUTPUT);
	pinMode(STROBE, OUTPUT);
	pinMode(NOTIFICATION, OUTPUT);
}

int state = LOW; int prev = HIGH;
long time = 0; long debounce = 200;

void state_standby() {
	boolean guard = millis() - time > debounce;
	if ((digitalRead(ARMED) == HIGH && ((digitalRead(ZONE1_MOTION) == HIGH || digitalRead(ZONE1_DOOR) == HIGH) || (digitalRead(ZONE2_MOTION) == HIGH || digitalRead(ZONE2_GLASS) == HIGH)) && !(digitalRead(ZONE3_SAFE) == HIGH)) && guard) {
		time = millis(); state_alarm_triggered();
	} else {
		state_standby();
	}
}

void state_alarm_triggered() {
	boolean guard = millis() - time > debounce;
	if (digitalRead(ARMED) == LOW && guard) {
		time = millis(); state_standby();
	} else {
		state_alarm_triggered();
	}
}

void loop() { state_standby(); }