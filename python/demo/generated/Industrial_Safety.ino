// generated by ArduinoML

int PRESSURE_HIGH = 2;
int TEMP_HIGH = 3;
int OPERATOR_OVERRIDE = 4;
int SENSOR1 = 5;
int SENSOR2 = 6;
int SENSOR3 = 7;
int MACHINE = 11;
int ALARM = 12;
int WARNING_LIGHT = 13;

void setup() {
	pinMode(PRESSURE_HIGH, INPUT);
	pinMode(TEMP_HIGH, INPUT);
	pinMode(OPERATOR_OVERRIDE, INPUT);
	pinMode(SENSOR1, INPUT);
	pinMode(SENSOR2, INPUT);
	pinMode(SENSOR3, INPUT);
	pinMode(MACHINE, OUTPUT);
	pinMode(ALARM, OUTPUT);
	pinMode(WARNING_LIGHT, OUTPUT);
}

int state = LOW; int prev = HIGH;
long time = 0; long debounce = 200;

void state_running() {
	boolean guard = millis() - time > debounce;
	if (((digitalRead(PRESSURE_HIGH) == HIGH || digitalRead(TEMP_HIGH) == HIGH) && digitalRead(OPERATOR_OVERRIDE) == LOW && (digitalRead(SENSOR1) == HIGH || digitalRead(SENSOR2) == HIGH || digitalRead(SENSOR3) == HIGH)) && guard) {
		time = millis(); state_emergency_stop();
	} else {
		state_running();
	}
}

void state_emergency_stop() {
	boolean guard = millis() - time > debounce;
	if ((digitalRead(PRESSURE_HIGH) == LOW && digitalRead(TEMP_HIGH) == LOW && digitalRead(OPERATOR_OVERRIDE) == HIGH) && guard) {
		time = millis(); state_running();
	} else {
		state_emergency_stop();
	}
}

void loop() { state_running(); }