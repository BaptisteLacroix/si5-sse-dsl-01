// generated by ArduinoML

int TEMP_LOW = 2;
int WINDOW_CLOSED = 3;
int FROST_ALERT = 4;
int POWER_AVAILABLE = 5;
int HEATER = 11;
int STATUS_LED = 12;

void setup() {
	pinMode(TEMP_LOW, INPUT);
	pinMode(WINDOW_CLOSED, INPUT);
	pinMode(FROST_ALERT, INPUT);
	pinMode(POWER_AVAILABLE, INPUT);
	pinMode(HEATER, OUTPUT);
	pinMode(STATUS_LED, OUTPUT);
}

int state = LOW; int prev = HIGH;
long time = 0; long debounce = 200;

void state_heating_off() {
	boolean guard = millis() - time > debounce;
	if ((((digitalRead(TEMP_LOW) == HIGH && digitalRead(WINDOW_CLOSED) == HIGH) || digitalRead(FROST_ALERT) == HIGH) && digitalRead(POWER_AVAILABLE) == HIGH) && guard) {
		time = millis(); state_heating_on();
	} else {
		state_heating_off();
	}
}

void state_heating_on() {
	boolean guard = millis() - time > debounce;
	if ((digitalRead(TEMP_LOW) == LOW || digitalRead(POWER_AVAILABLE) == LOW) && guard) {
		time = millis(); state_heating_off();
	} else {
		state_heating_on();
	}
}

void loop() { state_heating_off(); }