// generated by ArduinoML

int VALID_TICKET = 2;
int SUBSCRIPTION_CARD = 3;
int EMERGENCY_BUTTON = 4;
int NO_OBSTACLE = 5;
int PAYMENT_OK = 6;
int BARRIER = 11;
int GREEN_LIGHT = 12;
int RED_LIGHT = 13;

void setup() {
	pinMode(VALID_TICKET, INPUT);
	pinMode(SUBSCRIPTION_CARD, INPUT);
	pinMode(EMERGENCY_BUTTON, INPUT);
	pinMode(NO_OBSTACLE, INPUT);
	pinMode(PAYMENT_OK, INPUT);
	pinMode(BARRIER, OUTPUT);
	pinMode(GREEN_LIGHT, OUTPUT);
	pinMode(RED_LIGHT, OUTPUT);
}

int state = LOW; int prev = HIGH;
long time = 0; long debounce = 200;

void state_closed() {
	boolean guard = millis() - time > debounce;
	if (((digitalRead(VALID_TICKET) == HIGH || digitalRead(SUBSCRIPTION_CARD) == HIGH || digitalRead(EMERGENCY_BUTTON) == HIGH) && digitalRead(NO_OBSTACLE) == HIGH && (digitalRead(PAYMENT_OK) == HIGH || digitalRead(SUBSCRIPTION_CARD) == HIGH || digitalRead(EMERGENCY_BUTTON) == HIGH)) && guard) {
		time = millis(); state_open();
	} else {
		state_closed();
	}
}

void state_open() {
	boolean guard = millis() - time > debounce;
	if ((digitalRead(VALID_TICKET) == LOW && digitalRead(SUBSCRIPTION_CARD) == LOW && digitalRead(EMERGENCY_BUTTON) == LOW) && guard) {
		time = millis(); state_closed();
	} else {
		state_open();
	}
}

void loop() { state_closed(); }